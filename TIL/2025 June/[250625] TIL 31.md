# SQL 코드카타 131-134, 154-157

131.
```sql
select *
from CITY
where countrycode = 'JPN'
```

132.
```sql
select name
from CITY
where countrycode = 'JPN'
```

133.
```sql
select city, state
from STATION
```

134.
```sql
select round(sum(LAT_N),2)
    ,   round(sum(long_w),2)
from STATION
```

154.
```sql
select sum(population)
from CITY
where countrycode = 'JPN'
```

155.
```sql
select max(population) - min(population) as difference
from CITY
```

156.
```sql
select CEIL(avg(salary) - avg(replace(salary,0,"")))
from Employees
```

> CEIL 올림
> ROUND 반올림

157.
```sql
select earning
    ,   count(*)
from (
    select salary * months as earning
    from Employee
) as earning_tb
group by earning
order by earning desc
limit 1
```

---
# 2.2 표본 오차와 신뢰구간
## 표본오차
- 표본에서 계산된 통계량과 모집단의 진짜 값 간의 차이
- 표본 크기가 클수록 표본오차는 작아짐
- 이는 표본이 모집단을 완벽하게 대표하지 못하기 때문에 발생하며, 표본의 크기와 표본 추출 방법에 따라 달라질 수 있다.
    - 표본의 크기: 표본의 크기가 클수록 표본 오차는 줄어든다. 더 많은 데이터를 수집할수록 모집단을 더 잘 대표하게 된다.
    - 표본 추출 방법: 무작위 추출 방법을 사용하면 표본오차를 줄일 수 있다. 모든 모집단 요소가 선택될 동등한 기회를 가지게 해야 한다.
## 신뢰구간
- 신뢰구간은 모집단의 특정 파라미터(평균, 비율)에 대해 추정된 값이 포함될 것으로 기대되는 범위를 나타냄
- 신뢰구간 계산 방법
    - 신뢰구간 = 표본평균 +- z * 표준오차
    - 여기서 z는 선택된 신뢰수준에 해당하는 z-값. 예를 들어 95% 신뢰구준의 z-값은 1.96이다.
    - 일반적으로 95% 신뢰수준을 많이 사용한다.
---
# 연속형 분포
## 정규분포
- 종 모양의 대칭 분포, 데이터가 평균 주위에 몰려있느 분포
- 평균을 중심으로 좌우 대칭이며 평균에서 멀어질수록 데이터의 빈도 감소
- 표준편차는 분포의 퍼짐 정도를 나타냄
## 긴 꼬리 분포(Long tail distribution)
- 대부분의 데이터 분포가 한쪽 끝에 몰려있고, 반대쪽으로 긴 꼬리가 이어지는 형태의 분포
- 정규분포와 달리 비대칭적
- 특정한 하나의 분포를 의미하지 않으며 여러 종류의 분포를 포함할 수 있음
> 일부가 전체적으로 큰 영향을 미치는 경우
## 스튜던트 t 분포
- 자유도가 커질수록 정규분포에 가까워짐
    - 자유도: 표본의 크기와 관련이 있는 값
## 카이제곱분포
- 범주형 데이터의 독립성 검정이나 적합도 검정에 사용되는 분포
- 자유도에 따라 모양이 달라짐
- 상관관계나 인과관게를 판별하고자 하는 원인의 독립변수가 '완벽하게 서로 다른 질적 자료'일 때 활용
> 독립성 검정이나 적합도 검정이 필요할 때
---
# 이산형 분포
## 이항분포
- 결과가 2개 나오는 상황일 때 사용하는 분포
- 연속된 값을 가지지 않고 특정한 정수 값만을 가질 수 있다. 예를 들어 동전을 10번 던질 때 앞면이 나오는 횟수는 0, 1, 2 , ... , 10과 같은 정수다. 따라서 연속적으로 그려지지 않는다.
- 이러한 이항분포처럼 연속된 값을 가지지 않는 분포를 이산형 분포라고 지칭하기도 함
- 성공/실패와 같은 두 가지 결과를 가지는 실험을 여러 번 반복했을 때 성공 횟수의 분포
- 독립적인 시행이 n번 반복되고, 각 시행에서 성공과 실패 중 하나의 결과만 간으한 경우를 모델링하는 분포
- 성공 확률을 p라 할 때, 성공의 횟수를 확률적으로 나타냄
- 실험 횟수(n)과 성공 확률(p)로 정의 됨
## 푸아송분포
- 희귀한 사건이 발생할 때 사용하는 분포
- 이항 분포처럼 연속된 값을 가지지 않기 때문에 이 분포도 역시 이산형 분포에 해당
- 평균 발생률 람다가 충분히 크다면 정규분포에 근사
    - 평균 밠생률: 주어진 시간이나 공간에서 사건이 몇 번 발생했는지?
> 단위 시간 또는 단위 면적 당 발생하는 사건의 수를 모델링할 때 사용하는 분포
---
## 분포를 어떻게 고르면 될까?
1. 데이터 수가 충분하다 > 정규 분포
2. 데이터 수가 작다 > 스튜던트 t 분포
3. 일부 데이터가 전체적으로 큰 영향을 미친다. > 롱 테일 분포(파레토 분포)
4. 범주형 데이터의 독립성 검정이나 적합도 검정 > 카이 제곱 분포
5. 결과가 두 개(성공 or 실패)만 나오는 상황 > 이항 분포